<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoTax</title> <link rel="stylesheet" href="./assets/styles.css">
</head>

<body>
    <div id="appContainer">
        <div id="navBar" style="display: none;">
            <div id="navTitle">NeoTax</div>
            <div id="navButtons">
                <button class="nav-button" id="btnEmpresas">Empresas Registradas</button>
                <button class="nav-button" id="btnAgregarEmpresa">Agregar Empresa</button>
                <button class="nav-button" id="btnAgregarTarifasICA">Agregar Ciudad ICA</button>
                <button class="nav-button" id="btnFacturas">Generar Factura</button>
                <button class="nav-button" id="btnHistorial">Historial Facturas</button>
                <button class="nav-button" id="btnICA">Total ICA a Pagar</button>
                <button class="nav-button logout" id="btnLogout">Cerrar Sesión</button> </div>
        </div>

        <div id="mainContent">
            <div id="loginContainer">
                <div class="auth-box">
                    <h1>NeoTax</h1>
                    <div id="loginForm">
                        <h2>Iniciar Sesión</h2>
                        <label for="loginUser">Usuario</label>
                        <input id="loginUser" type="text" autocomplete="username" />
                        <label for="loginPass">Contraseña</label>
                        <input id="loginPass" type="password" autocomplete="current-password" />
                        <button id="loginButton">Entrar</button>
                        <button class="link-button" id="showRegisterBtn">¿No tienes cuenta? Regístrate</button>
                        <div id="loginMsg" class="message" style="display: none;"></div>
                    </div>

                    <div id="registerForm" style="display:none;">
                        <h2>Registro</h2>
                        <label for="regUser">Usuario</label>
                        <input id="regUser" type="text" autocomplete="username" />
                        <label for="regPass">Contraseña</label>
                        <input id="regPass" type="password" autocomplete="new-password" />
                        <label for="regRole">Rol</label>
                        <select id="regRole">
                            <option value="invitado">Invitado</option>
                            <option value="auxiliar">Auxiliar Contable</option>
                            <option value="contador">Contador</option>
                            <option value="revisor">Revisor Fiscal</option>
                        </select>
                        <button id="registerButton">Registrar</button>
                        <button class="link-button" id="showLoginBtn">¿Ya tienes cuenta? Inicia sesión</button>
                        <div id="registerMsg" class="message" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div id="dashboardContent" style="display: none;">
                <div id="welcomeSection" class="section">
                    <div class="welcome-message">
                        <h2>Bienvenido al Sistema Contable Integral</h2>
                        <p id="welcomeText">Estamos encantados de tenerte aquí. Selecciona una opción del menú superior
                            para comenzar.</p>
                    </div>
                </div>

                <div id="agregarEmpresaSection" class="section" style="display: none;">
                    <h2>Agregar Nueva Empresa</h2>
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreEmpresa">Nombre de la Empresa</label>
                                <input type="text" id="nombreEmpresa" placeholder="Ej: XYZ S.A.S" />
                            </div>
                            <div class="form-group">
                                <label for="nitEmpresa">NIT</label>
                                <input type="text" id="nitEmpresa" placeholder="Ej: 900123456-7" />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="ciudadEmpresa">Ciudad</label>
                                <select id="ciudadEmpresa">
                                    <option value="" disabled selected>Seleccione ciudad</option>
                                    <option value="Barranquilla">Barranquilla</option>
                                    <option value="Medellín">Medellín</option>
                                    <option value="Cali">Cali</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="actividadEmpresa">Actividad económica</label>
                                <select id="actividadEmpresa">
                                    <option value="" disabled selected>Seleccione actividad</option>
                                    <option value="Comercio">Comercio</option>
                                    <option value="Servicios">Servicios</option>
                                    <option value="Industria">Industria</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="regimenEmpresa">Régimen Tributario</label>
                                <select id="regimenEmpresa">
                                    <option value="" disabled selected>Seleccione régimen</option>
                                    <option value="General">General</option>
                                    <option value="Simplificado">Simplificado</option>
                                    <option value="Especial">Especial</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="direccionEmpresa">Dirección</label>
                                <input type="text" id="direccionEmpresa" placeholder="Dirección completa" />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="tarifaNacional">Tarifa Impuestos Nacionales (%)</label>
                                <input type="number" id="tarifaNacional" min="0" max="100" step="0.1" value="19" />
                            </div>
                            <div class="form-group">
                                <label for="tarifaTerritorial">Tarifa Impuestos Territoriales (%)</label>
                                <input type="number" id="tarifaTerritorial" min="0" max="100" step="0.1" value="10" />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="retenciones">Retenciones (%)</label>
                                <input type="number" id="retenciones" min="0" max="100" step="0.1" value="3.5" />
                            </div>
                            <div class="form-group">
                                <label for="autoretenciones">Autoretenciones (%)</label>
                                <input type="number" id="autoretenciones" min="0" max="100" step="0.1" value="1" />
                            </div>
                        </div>

                        <button id="agregarEmpresaBtn">Guardar Empresa</button>
                        <div id="empresaMsg" class="message" style="display: none;"></div>
                    </div>
                </div>

                <div id="empresasSection" class="section" style="display: none;">
                    <h2>Empresas Registradas</h2>
                    <div class="card">
                        <div id="empresasTableContainer">
                            </div>
                    </div>
                </div>
                <div id="tarifasICASection" class="section" style="display: none;">
                    <h2>Agregar Nueva Ciudad y Tarifas ICA</h2>
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nuevaCiudad">Ciudad</label>
                                <input type="text" id="nuevaCiudad" placeholder="Ej: Cartagena" />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="tarifaComercio">Tarifa Comercio (%)</label>
                                <input type="number" id="tarifaComercio" step="0.1" />
                            </div>
                            <div class="form-group">
                                <label for="tarifaServicios">Tarifa Servicios (%)</label>
                                <input type="number" id="tarifaServicios" step="0.1" />
                            </div>
                            <div class="form-group">
                                <label for="tarifaIndustria">Tarifa Industria (%)</label>
                                <input type="number" id="tarifaIndustria" step="0.1" />
                            </div>
                        </div>

                        <button id="agregarTarifaICABtn">Guardar Ciudad y Tarifas</button>
                        <div id="tarifaICAMsg" class="message" style="display: none;"></div>
                    </div>
                </div>

                <div id="facturasSection" class="section" style="display: none;">
                    <h2>Generar Factura</h2>
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="empresaFactura">Seleccione Empresa</label>
                                <select id="empresaFactura">
                                    <option value="" disabled selected>-- Seleccione una empresa --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="valorVenta">Valor de la venta o servicio (COP)</label>
                                <input type="number" id="valorVenta" placeholder="Ej: 1000000" min="1" />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="conceptoFactura">Concepto</label>
                                <input type="text" id="conceptoFactura"
                                    placeholder="Descripción del producto/servicio" />
                            </div>
                        </div>

                        <button id="generarFacturaBtn">Generar Factura</button>
                        <div id="facturaMsg" class="message" style="display: none;"></div>
                        <div id="facturaResult" class="card" style="margin-top: 1.5rem; display: none;"></div>
                    </div>
                </div>

                <div id="historialSection" class="section" style="display: none;"> <h2>Historial de Facturas</h2>
                    <div class="card">
                        <div id="filtrosFacturas" class="form-row filtros-container"
                            style="margin-bottom: 1rem; gap: 0.5rem; align-items: center;">
                            <label for="filtroFecha">Fecha:</label>
                            <input type="date" id="filtroFecha" />

                            <label for="filtroNIT">NIT:</label>
                            <input type="text" id="filtroNIT" placeholder="Buscar por NIT" />

                            <label for="filtroEmpresa">Empresa:</label>
                            <input type="text" id="filtroEmpresa" placeholder="Buscar por empresa" />

                            <button id="filtroBuscarBtn" class="nav-button">Buscar</button>
                            <button id="filtroLimpiarBtn" class="nav-button"
                                style="background: #999; color: white;">Limpiar</button>
                        </div>
                        <div id="historialTableContainer">
                            </div>
                    </div>
                </div>

                <div id="facturaModal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <span class="close" id="closeModalBtn">&times;</span> <div id="facturaDetail"></div>
                    </div>
                </div>

                <div id="icaSection" class="section" style="display: none;">
                    <h2>Total ICA a Pagar por Ciudad</h2>
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="selectCiudadICA">Seleccione Ciudad</label>
                                <select id="selectCiudadICA">
                                    <option value="" disabled selected>-- Seleccione ciudad --</option>
                                    <option value="Barranquilla">Barranquilla</option>
                                    <option value="Medellín">Medellín</option>
                                    <option value="Cali">Cali</option>
                                </select>
                            </div>
                        </div>

                        <div id="icaResult" style="margin-top: 1.5rem;">
                            <h3>Resultados para: <span id="ciudadSeleccionada"></span></h3>
                            <div id="icaEmpresas"></div>
                            <div id="icaFacturas"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./resource/app.js"></script>
</body>

</html>